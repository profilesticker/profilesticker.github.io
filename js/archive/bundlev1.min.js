function handleImage(n){testN();console.log("handle image");var i=new FileReader,r=document.getElementById("imageLoader").value,t=r.substring(r.lastIndexOf(".")+1).toLowerCase();n.target.files||(console.log("no image selected"),document.getElementById("statusOfPicture").innerHTML="");n.target.files[0]&&(t=="png"||t=="jpeg"||t=="jpg")&&(i.onload=function(n){var t=new Image;t.onload=function(){canvas.width=t.width;canvas.height=t.height;ctx.drawImage(t,0,0)};t.src=n.target.result;document.getElementById("statusOfPicture").innerHTML="Loaded"},i.readAsDataURL(n.target.files[0]))}function dataURItoBlob(n){for(var i=atob(n.split(",")[1]),r=new ArrayBuffer(i.length),u=new Uint8Array(r),t=0;t<i.length;t++)u[t]=i.charCodeAt(t);return new Blob([r],{type:"image/png"})}function downloadCanvas(n,t,i){n.href=document.getElementById(t).toDataURL();n.download=i}function postNewPicture(n){var r=document.getElementById("imageCanvas"),u=r.toDataURL("image/png"),t;try{blob=dataURItoBlob(u)}catch(i){console.log(i)}t=new FormData;t.append("access_token",n);t.append("source",blob);t.append("message","Photo Text");try{$.ajax({url:"https://graph.facebook.com/me/photos?access_token="+n,type:"POST",data:t,processData:!1,contentType:!1,cache:!1,success:function(n){console.log("success "+n);$("#poster").html("Posted Canvas Successfully")},error:function(n,t,i){console.log("error "+i+" Status "+n.status)},complete:function(){console.log("Posted to facebook")}})}catch(i){console.log(i)}}function logout(){FB.logout(function(){})}function login(){FB.login(function(n){console.log("Response goes here!");document.getElementById("profileImage").setAttribute("src","http://graph.facebook.com/"+n.authResponse.userID+"/picture?type=large");drawFBPictureToCanvas("http://graph.facebook.com/"+n.authResponse.userID+"/picture?type=large");console.log(n);console.log(n.authResponse.userID);_authToken=n.authResponse.accessToken},{scope:"email, user_photos, publish_actions, publish_stream"})}function postToFacebook(){postNewPicture(_authToken)}function drawFBPictureToCanvas(n){var t=new Image;t.crossOrigin="Anonymous";canvas.width=200;canvas.height=200;t.height=200;t.width=200;t.onload=function(){ctx.drawImage(t,0,0)};t.src=n}function createOverlayMagic(){console.log("overlay magic");img2=loadImage()}function doTheMagic(){var n=canvas.getContext("2d");n.drawImage(img2,20,20)}function loadImage(){var n=new Image;return n.onload=doTheMagic,n.height="20",n.width="20",n.src="../images/coin.png",n}function testN(){console.log(x)}var _authToken,canvas=document.getElementById("imageCanvas"),img2,x=10,testM=function(){};